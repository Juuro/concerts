{"version":3,"file":"component---src-templates-year-js-7fd4399de1b2f1e3a935.js","mappings":"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","sources":["webpack://gatsby-starter-default/./src/components/ConcertCard/concertCard.js","webpack://gatsby-starter-default/./src/templates/year.js"],"sourcesContent":["import PropTypes from \"prop-types\"\nimport React from \"react\"\nimport { Link } from \"gatsby\"\n\nimport \"./concertCard.scss\"\n\nconst ConcertCard = ({ concert }) => {\n  const heading = () => {\n    if (concert.isFestival) {\n      return concert.festival.name\n    }\n    return (\n      <Link to={`/band/${concert.bands[0].slug}`}>{concert.bands[0].name}</Link>\n    )\n  }\n\n  const bands = () => {\n    const bands = [...concert.bands]\n    // TODO: Badges as seperate (tag) component?\n    if (concert.isFestival) {\n      return bands.map((band) => {\n        return (\n          <Link\n            to={`/band/${band.slug}`}\n            key={band.id}\n            className=\"badge bg-primary mr-2\"\n          >\n            {band.name}\n          </Link>\n        )\n      })\n    } else {\n      bands.shift()\n      return bands.map((band) => {\n        return (\n          <Link\n            to={`/band/${band.slug}`}\n            key={band.id}\n            className=\"badge bg-primary mr-2\"\n          >\n            {band.name}\n          </Link>\n        )\n      })\n    }\n  }\n\n  const isInTheFuture = () => {\n    if (concert.date > new Date().toISOString()) {\n      return \"future\"\n    }\n    return \"\"\n  }\n\n  const getDate = () => {\n    const date = new Date(concert.date)\n    return date.toLocaleDateString(\"de-DE\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    })\n  }\n\n  // Get image URL - prefer Last.fm, fallback to Contentful\n  const getImageUrl = () => {\n    // Debug: log what we're getting from Last.fm\n    console.log(\"Band:\", concert.bands[0].name)\n    console.log(\"Last.fm data:\", concert.bands[0].fields?.lastfm)\n    console.log(\"Last.fm images:\", concert.bands[0].fields?.lastfm?.images)\n\n    // Try Last.fm images in order of preference\n    const lastfmImages = concert.bands[0].fields?.lastfm?.images\n    const lastfmImage =\n      lastfmImages?.extralarge || lastfmImages?.large || lastfmImages?.medium\n\n    // Only use Last.fm image if it's a valid non-empty string\n    if (lastfmImage && lastfmImage.trim() !== \"\") {\n      console.log(\"Using Last.fm image:\", lastfmImage)\n      return lastfmImage\n    }\n\n    // Fallback to Contentful\n    const contentfulImage = concert.bands[0].image?.file.url\n    console.log(\"Using Contentful image:\", contentfulImage)\n    return contentfulImage\n  }\n\n  return (\n    <li className={`concert-card card ${isInTheFuture()}`}>\n      <div\n        className=\"concert-card-image\"\n        style={{\n          backgroundImage: getImageUrl() ? `url(${getImageUrl()})` : \"none\",\n        }}\n      ></div>\n      <div className=\"concert-card-body\">\n        <h3 className=\"card-title\">{heading()}</h3>\n        <span>{getDate()}</span>\n        {bands() && <div className=\"bands\">{bands()}</div>}\n      </div>\n      <div className=\"concert-card-location\">\n        <div>\n          <div className=\"club\">{concert.club}</div>\n          <div className=\"city\">\n            <Link\n              to={`/city/${concert.fields.geocoderAddressFields._normalized_city?.toLowerCase()}`}\n            >\n              {concert.fields.geocoderAddressFields._normalized_city}\n            </Link>\n          </div>\n        </div>\n      </div>\n    </li>\n  )\n}\n\nConcertCard.propTypes = {\n  concert: PropTypes.object,\n}\n\nexport default ConcertCard\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { graphql } from \"gatsby\"\n\nimport Layout from \"../components/layout\"\nimport ConcertCard from \"../components/ConcertCard/concertCard\"\nimport ConcertCount from \"../components/ConcertCount/concertCount\"\nimport Seo from \"../components/seo\"\n\nconst Year = ({\n  data: { allContentfulConcert: concerts },\n  pageContext: { year, gt, lt },\n}) => {\n  return (\n    <Layout>\n      <main>\n        <Seo title={year} />\n        <h2>\n          {year}\n          <ConcertCount concerts={concerts} />\n        </h2>\n\n        <ul className=\"list-unstyled\">\n          {concerts.edges.map(({ node: concert }) => {\n            return <ConcertCard key={concert.id} concert={concert} />\n          })}\n        </ul>\n      </main>\n    </Layout>\n  )\n}\n\nYear.propTypes = {\n  data: PropTypes.shape({\n    allContentfulBand: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      slug: PropTypes.string.isRequired,\n      url: PropTypes.string,\n    }),\n  }).isRequired,\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default Year\n\nexport const pageQuery = graphql`\n  query YearQuery($gt: Date!, $lt: Date!) {\n    allContentfulConcert(\n      sort: { date: DESC }\n      filter: { date: { gte: $gt, lte: $lt } }\n    ) {\n      edges {\n        node {\n          ...ContentfulConcertFields\n        }\n      }\n      totalCount\n    }\n  }\n`\n"],"names":["_ref","_concert$fields$geoco","concert","bands","_toConsumableArray","isFestival","shift","map","band","React","Link","to","slug","key","id","className","name","getImageUrl","_concert$bands$0$fiel","_concert$bands$0$fiel2","_concert$bands$0$fiel3","_concert$bands$0$fiel4","_concert$bands$0$fiel5","_concert$bands$0$imag","console","log","fields","lastfm","images","lastfmImages","lastfmImage","extralarge","large","medium","trim","contentfulImage","image","file","url","date","Date","toISOString","style","backgroundImage","festival","toLocaleDateString","year","month","day","club","geocoderAddressFields","_normalized_city","toLowerCase","data","allContentfulConcert","concerts","pageContext","gt","lt","Layout","Seo","title","ConcertCount","edges","_ref2","node","ConcertCard"],"sourceRoot":""}