{"version":3,"file":"component---src-templates-band-js-2f2d9fc425e0f4e2f6a0.js","mappings":"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","sources":["webpack://gatsby-starter-default/./src/components/ConcertCard/concertCard.js","webpack://gatsby-starter-default/./src/templates/band.js"],"sourcesContent":["import PropTypes from \"prop-types\"\nimport React from \"react\"\nimport { Link } from \"gatsby\"\n\nimport \"./concertCard.scss\"\n\nconst ConcertCard = ({ concert }) => {\n  const heading = () => {\n    if (concert.isFestival) {\n      return concert.festival.name\n    }\n    return (\n      <Link to={`/band/${concert.bands[0].slug}`}>{concert.bands[0].name}</Link>\n    )\n  }\n\n  const bands = () => {\n    const bands = [...concert.bands]\n    // TODO: Badges as seperate (tag) component?\n    if (concert.isFestival) {\n      return bands.map((band) => {\n        return (\n          <Link\n            to={`/band/${band.slug}`}\n            key={band.id}\n            className=\"badge bg-primary mr-2\"\n          >\n            {band.name}\n          </Link>\n        )\n      })\n    } else {\n      bands.shift()\n      return bands.map((band) => {\n        return (\n          <Link\n            to={`/band/${band.slug}`}\n            key={band.id}\n            className=\"badge bg-primary mr-2\"\n          >\n            {band.name}\n          </Link>\n        )\n      })\n    }\n  }\n\n  const isInTheFuture = () => {\n    if (concert.date > new Date().toISOString()) {\n      return \"future\"\n    }\n    return \"\"\n  }\n\n  const getDate = () => {\n    const date = new Date(concert.date)\n    return date.toLocaleDateString(\"de-DE\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    })\n  }\n\n  // Get image URL - prefer Last.fm, fallback to Contentful\n  const getImageUrl = () => {\n    // Debug: log what we're getting from Last.fm\n    console.log(\"Band:\", concert.bands[0].name)\n    console.log(\"Last.fm data:\", concert.bands[0].fields?.lastfm)\n    console.log(\"Last.fm images:\", concert.bands[0].fields?.lastfm?.images)\n\n    // Try Last.fm images in order of preference\n    const lastfmImages = concert.bands[0].fields?.lastfm?.images\n    const lastfmImage =\n      lastfmImages?.extralarge || lastfmImages?.large || lastfmImages?.medium\n\n    // Only use Last.fm image if it's a valid non-empty string\n    if (lastfmImage && lastfmImage.trim() !== \"\") {\n      console.log(\"Using Last.fm image:\", lastfmImage)\n      return lastfmImage\n    }\n\n    // Fallback to Contentful\n    const contentfulImage = concert.bands[0].image?.file.url\n    console.log(\"Using Contentful image:\", contentfulImage)\n    return contentfulImage\n  }\n\n  return (\n    <li className={`concert-card card ${isInTheFuture()}`}>\n      <div\n        className=\"concert-card-image\"\n        style={{\n          backgroundImage: getImageUrl() ? `url(${getImageUrl()})` : \"none\",\n        }}\n      ></div>\n      <div className=\"concert-card-body\">\n        <h3 className=\"card-title\">{heading()}</h3>\n        <span>{getDate()}</span>\n        {bands() && <div className=\"bands\">{bands()}</div>}\n      </div>\n      <div className=\"concert-card-location\">\n        <div>\n          <div className=\"club\">{concert.club}</div>\n          <div className=\"city\">\n            <Link\n              to={`/city/${concert.fields.geocoderAddressFields._normalized_city?.toLowerCase()}`}\n            >\n              {concert.fields.geocoderAddressFields._normalized_city}\n            </Link>\n          </div>\n        </div>\n      </div>\n    </li>\n  )\n}\n\nConcertCard.propTypes = {\n  concert: PropTypes.object,\n}\n\nexport default ConcertCard\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { graphql } from \"gatsby\"\n\nimport Layout from \"../components/layout\"\nimport ConcertCard from \"../components/ConcertCard/concertCard\"\nimport ConcertCount from \"../components/ConcertCount/concertCount\"\nimport Seo from \"../components/seo\"\n\nconst Band = ({\n  data: { allContentfulConcert: concerts },\n  pageContext: { name, lastfm },\n}) => {\n  return (\n    <Layout>\n      <main>\n        <Seo title={name} />\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            gap: \"20px\",\n            marginBottom: \"20px\",\n          }}\n        >\n          {lastfm?.images?.large && (\n            <img\n              src={lastfm.images.large}\n              alt={name}\n              style={{\n                width: \"150px\",\n                height: \"150px\",\n                objectFit: \"cover\",\n                borderRadius: \"8px\",\n              }}\n            />\n          )}\n          <div>\n            <h2>\n              {name}\n              <ConcertCount concerts={concerts} />\n            </h2>\n            {lastfm?.genres && lastfm.genres.length > 0 && (\n              <div style={{ marginTop: \"10px\" }}>\n                <strong>Genres: </strong>\n                {lastfm.genres.slice(0, 5).map((genre, index) => (\n                  <span\n                    key={genre}\n                    className=\"badge bg-secondary\"\n                    style={{ marginRight: \"5px\" }}\n                  >\n                    {genre}\n                  </span>\n                ))}\n              </div>\n            )}\n            {lastfm?.url && (\n              <div style={{ marginTop: \"10px\" }}>\n                <a href={lastfm.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  View on Last.fm â†’\n                </a>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <ul className=\"list-unstyled\">\n          {concerts.edges.map(({ node: concert }) => {\n            return <ConcertCard key={concert.id} concert={concert} />\n          })}\n        </ul>\n      </main>\n    </Layout>\n  )\n}\n\nBand.propTypes = {\n  data: PropTypes.shape({\n    allContentfulConcert: PropTypes.object.isRequired,\n  }).isRequired,\n  pageContext: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    slug: PropTypes.string.isRequired,\n    lastfm: PropTypes.shape({\n      name: PropTypes.string,\n      url: PropTypes.string,\n      images: PropTypes.shape({\n        small: PropTypes.string,\n        medium: PropTypes.string,\n        large: PropTypes.string,\n        extralarge: PropTypes.string,\n        mega: PropTypes.string,\n      }),\n      genres: PropTypes.arrayOf(PropTypes.string),\n      bio: PropTypes.string,\n    }),\n  }).isRequired,\n}\n\nexport default Band\n\nexport const pageQuery = graphql`\n  query BandQuery($slug: String!) {\n    allContentfulConcert(\n      sort: { date: DESC }\n      filter: { bands: { elemMatch: { slug: { eq: $slug } } } }\n    ) {\n      edges {\n        node {\n          ...ContentfulConcertFields\n        }\n      }\n      totalCount\n    }\n  }\n`\n"],"names":["_ref","_concert$fields$geoco","concert","bands","_toConsumableArray","isFestival","shift","map","band","React","Link","to","slug","key","id","className","name","getImageUrl","_concert$bands$0$fiel","_concert$bands$0$fiel2","_concert$bands$0$fiel3","_concert$bands$0$fiel4","_concert$bands$0$fiel5","_concert$bands$0$imag","console","log","fields","lastfm","images","lastfmImages","lastfmImage","extralarge","large","medium","trim","contentfulImage","image","file","url","date","Date","toISOString","style","backgroundImage","festival","toLocaleDateString","year","month","day","club","geocoderAddressFields","_normalized_city","toLowerCase","_lastfm$images","data","allContentfulConcert","concerts","pageContext","Layout","Seo","title","display","alignItems","gap","marginBottom","src","alt","width","height","objectFit","borderRadius","ConcertCount","genres","length","marginTop","slice","genre","index","marginRight","href","target","rel","edges","_ref2","node","ConcertCard"],"sourceRoot":""}