{"version":3,"file":"component---src-templates-city-js-01756091dd776c732162.js","mappings":"uKA0GA,IApGoBA,IAAkB,IAADC,EAAAC,EAAA,IAAhB,QAAEC,GAASH,EAC9B,MASMI,EAAQA,KACZ,MAAMA,GAAKC,EAAAA,EAAAA,GAAOF,EAAQC,OAE1B,OAAID,EAAQG,YAaVF,EAAMG,QAZCH,EAAMI,KAAKC,GAEdC,EAAAA,cAACC,EAAAA,KAAI,CACHC,GAAI,SAASH,EAAKI,OAClBC,IAAKL,EAAKM,GACVC,UAAU,yBAETP,EAAKQ,OAiBd,EAGIC,EAAkBA,KACtB,QAAQ,GACN,MAAOf,EAAQgB,OAAOC,sBAAsBC,QAC1C,OAAOlB,EAAQgB,OAAOC,sBAAsBC,QAC9C,MAAOlB,EAAQgB,OAAOC,sBAAsBE,KAC1C,OAAOnB,EAAQgB,OAAOC,sBAAsBE,KAC9C,MAAOnB,EAAQgB,OAAOC,sBAAsBG,KAC5C,QACE,OAAOpB,EAAQgB,OAAOC,sBAAsBG,KAChD,EAmBF,OACEb,EAAAA,cAAA,MAAIM,UAAW,sBAhBXb,EAAQqB,MAAO,IAAIC,MAAOC,cACrB,SAEF,KAcLhB,EAAAA,cAAA,OACEM,UAAU,qBACVW,MAAO,CACLC,gBAAiB,OAA6B,QAA7B3B,EAAOE,EAAQC,MAAM,GAAGyB,aAAK,IAAA5B,OAAA,EAAtBA,EAAwB6B,KAAKC,UAGzDrB,EAAAA,cAAA,OAAKM,UAAU,qBACbN,EAAAA,cAAA,MAAIM,UAAU,cA5Edb,EAAQG,WACHH,EAAQ6B,SAASf,KAGxBP,EAAAA,cAACC,EAAAA,KAAI,CAACC,GAAI,SAAST,EAAQC,MAAM,GAAGS,QAASV,EAAQC,MAAM,GAAGa,OAyE5DP,EAAAA,cAAA,YAlBS,IAAIe,KAAKtB,EAAQqB,MAClBS,mBAAmB,QAAS,CACtCC,KAAM,UACNC,MAAO,OACPC,IAAK,aAeFhC,KAAWM,EAAAA,cAAA,OAAKM,UAAU,SAASZ,MAEtCM,EAAAA,cAAA,OAAKM,UAAU,yBACbN,EAAAA,cAAA,WACEA,EAAAA,cAAA,OAAKM,UAAU,QAAQb,EAAQkC,MAC/B3B,EAAAA,cAAA,OAAKM,UAAU,QACbN,EAAAA,cAACC,EAAAA,KAAI,CAACC,GAAI,SAA0B,QAA1BV,EAASgB,WAAiB,IAAAhB,OAAA,EAAjBA,EAAmBoC,iBACnCpB,QAKN,C,8FC/CT,UA1CalB,IAGN,IAFLuC,MAAM,aAAEC,EAAY,aAAEC,EAAY,gBAAEC,GACpCC,aAAa,KAAE1B,IAChBjB,EACC,MAAM4C,EAAW,CACfC,MAAM,GAADC,QAAAzC,EAAAA,EAAAA,GACAmC,EAAaK,QAAKxC,EAAAA,EAAAA,GAClBoC,EAAaI,QAAKxC,EAAAA,EAAAA,GAClBqC,EAAgBG,SAIvB,OACEnC,EAAAA,cAACqC,EAAAA,EAAM,KACLrC,EAAAA,cAAA,YACEA,EAAAA,cAACsC,EAAAA,EAAG,CAACC,MAAOhC,IACZP,EAAAA,cAAA,UACGO,EACDP,EAAAA,cAACwC,EAAAA,EAAY,CAACN,SAAUA,KAG1BlC,EAAAA,cAAA,MAAIM,UAAU,iBACX4B,EAASC,MAAMrC,KAAI2C,IAAwB,IAArBC,KAAMjD,GAASgD,EACpC,OAAOzC,EAAAA,cAAC2C,EAAAA,EAAW,CAACvC,IAAKX,EAAQY,GAAIZ,QAASA,GAAW,MAIxD,C","sources":["webpack://gatsby-starter-default/./src/components/ConcertCard/concertCard.js","webpack://gatsby-starter-default/./src/templates/city.js"],"sourcesContent":["import PropTypes from \"prop-types\"\nimport React from \"react\"\nimport { Link } from \"gatsby\"\n\nimport \"./concertCard.scss\"\n\nconst ConcertCard = ({ concert }) => {\n  const heading = () => {\n    if (concert.isFestival) {\n      return concert.festival.name\n    }\n    return (\n      <Link to={`/band/${concert.bands[0].slug}`}>{concert.bands[0].name}</Link>\n    )\n  }\n\n  const bands = () => {\n    const bands = [...concert.bands]\n    // TODO: Badges as seperate (tag) component?\n    if (concert.isFestival) {\n      return bands.map((band) => {\n        return (\n          <Link\n            to={`/band/${band.slug}`}\n            key={band.id}\n            className=\"badge bg-primary mr-2\"\n          >\n            {band.name}\n          </Link>\n        )\n      })\n    } else {\n      bands.shift()\n      return bands.map((band) => {\n        return (\n          <Link\n            to={`/band/${band.slug}`}\n            key={band.id}\n            className=\"badge bg-primary mr-2\"\n          >\n            {band.name}\n          </Link>\n        )\n      })\n    }\n  }\n\n  const cityTownVillage = () => {\n    switch (true) {\n      case !!concert.fields.geocoderAddressFields.village:\n        return concert.fields.geocoderAddressFields.village\n      case !!concert.fields.geocoderAddressFields.town:\n        return concert.fields.geocoderAddressFields.town\n      case !!concert.fields.geocoderAddressFields.city:\n      default:\n        return concert.fields.geocoderAddressFields.city\n    }\n  }\n\n  const isInTheFuture = () => {\n    if (concert.date > new Date().toISOString()) {\n      return \"future\"\n    }\n    return \"\"\n  }\n\n  const getDate = () => {\n    const date = new Date(concert.date)\n    return date.toLocaleDateString(\"de-DE\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    })\n  }\n\n  return (\n    <li className={`concert-card card ${isInTheFuture()}`}>\n      <div\n        className=\"concert-card-image\"\n        style={{\n          backgroundImage: `url(${concert.bands[0].image?.file.url})`,\n        }}\n      ></div>\n      <div className=\"concert-card-body\">\n        <h3 className=\"card-title\">{heading()}</h3>\n        <span>{getDate()}</span>\n        {bands() && <div className=\"bands\">{bands()}</div>}\n      </div>\n      <div className=\"concert-card-location\">\n        <div>\n          <div className=\"club\">{concert.club}</div>\n          <div className=\"city\">\n            <Link to={`/city/${cityTownVillage()?.toLowerCase()}`}>\n              {cityTownVillage()}\n            </Link>\n          </div>\n        </div>\n      </div>\n    </li>\n  )\n}\n\nConcertCard.propTypes = {\n  concert: PropTypes.object,\n}\n\nexport default ConcertCard\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { graphql } from \"gatsby\"\n\nimport Layout from \"../components/layout\"\nimport ConcertCard from \"../components/ConcertCard/concertCard\"\nimport ConcertCount from \"../components/ConcertCount/concertCount\"\nimport Seo from \"../components/seo\"\n\nconst City = ({\n  data: { cityConcerts, townConcerts, villageConcerts },\n  pageContext: { name },\n}) => {\n  const concerts = {\n    edges: [\n      ...cityConcerts.edges,\n      ...townConcerts.edges,\n      ...villageConcerts.edges,\n    ],\n  }\n\n  return (\n    <Layout>\n      <main>\n        <Seo title={name} />\n        <h2>\n          {name}\n          <ConcertCount concerts={concerts} />\n        </h2>\n\n        <ul className=\"list-unstyled\">\n          {concerts.edges.map(({ node: concert }) => {\n            return <ConcertCard key={concert.id} concert={concert} />\n          })}\n        </ul>\n      </main>\n    </Layout>\n  )\n}\n\nCity.propTypes = {\n  data: PropTypes.shape({\n    allContentfulBand: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n    }),\n  }).isRequired,\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default City\n\nexport const pageQuery = graphql`\n  query CityQuery($name: String!) {\n    cityConcerts: allContentfulConcert(\n      sort: { date: DESC }\n      filter: { fields: { geocoderAddressFields: { city: { eq: $name } } } }\n    ) {\n      edges {\n        node {\n          ...ContentfulConcertFields\n        }\n      }\n      totalCount\n    }\n    townConcerts: allContentfulConcert(\n      sort: { date: DESC }\n      filter: { fields: { geocoderAddressFields: { town: { eq: $name } } } }\n    ) {\n      edges {\n        node {\n          ...ContentfulConcertFields\n        }\n      }\n      totalCount\n    }\n    villageConcerts: allContentfulConcert(\n      sort: { date: DESC }\n      filter: { fields: { geocoderAddressFields: { village: { eq: $name } } } }\n    ) {\n      edges {\n        node {\n          ...ContentfulConcertFields\n        }\n      }\n      totalCount\n    }\n  }\n`\n"],"names":["_ref","_concert$bands$0$imag","_cityTownVillage","concert","bands","_toConsumableArray","isFestival","shift","map","band","React","Link","to","slug","key","id","className","name","cityTownVillage","fields","geocoderAddressFields","village","town","city","date","Date","toISOString","style","backgroundImage","image","file","url","festival","toLocaleDateString","year","month","day","club","toLowerCase","data","cityConcerts","townConcerts","villageConcerts","pageContext","concerts","edges","concat","Layout","Seo","title","ConcertCount","_ref2","node","ConcertCard"],"sourceRoot":""}