{"version":3,"file":"component---src-templates-city-js-bfb0778558db85a8317c.js","mappings":"uKAgGA,IA1FoBA,IAAkB,IAADC,EAAA,IAAhB,QAAEC,GAASF,EAC9B,MASMG,EAAQA,KACZ,MAAMA,GAAKC,EAAAA,EAAAA,GAAOF,EAAQC,OAE1B,OAAID,EAAQG,YAaVF,EAAMG,QAZCH,EAAMI,KAAKC,GAEdC,EAAAA,cAACC,EAAAA,KAAI,CACHC,GAAI,SAASH,EAAKI,OAClBC,IAAKL,EAAKM,GACVC,UAAU,yBAETP,EAAKQ,OAiBd,EAmBF,OACEP,EAAAA,cAAA,MAAIM,UAAW,sBAhBXb,EAAQe,MAAO,IAAIC,MAAOC,cACrB,SAEF,KAcLV,EAAAA,cAAA,OACEM,UAAU,qBACVK,MAAO,CACLC,gBAAiB,OAA6B,QAA7BpB,EAAOC,EAAQC,MAAM,GAAGmB,aAAK,IAAArB,OAAA,EAAtBA,EAAwBsB,KAAKC,UAGzDf,EAAAA,cAAA,OAAKM,UAAU,qBACbN,EAAAA,cAAA,MAAIM,UAAU,cAhEdb,EAAQG,WACHH,EAAQuB,SAAST,KAGxBP,EAAAA,cAACC,EAAAA,KAAI,CAACC,GAAI,SAAST,EAAQC,MAAM,GAAGS,QAASV,EAAQC,MAAM,GAAGa,OA6D5DP,EAAAA,cAAA,YAlBS,IAAIS,KAAKhB,EAAQe,MAClBS,mBAAmB,QAAS,CACtCC,KAAM,UACNC,MAAO,OACPC,IAAK,aAeF1B,KAAWM,EAAAA,cAAA,OAAKM,UAAU,SAASZ,MAEtCM,EAAAA,cAAA,OAAKM,UAAU,yBACbN,EAAAA,cAAA,WACEA,EAAAA,cAAA,OAAKM,UAAU,QAAQb,EAAQ4B,MAC/BrB,EAAAA,cAAA,OAAKM,UAAU,QACbN,EAAAA,cAACC,EAAAA,KAAI,CACHC,GAAI,SAAST,EAAQ6B,OAAOC,sBAAsBC,iBAAiBC,iBAElEhC,EAAQ6B,OAAOC,sBAAsBC,qBAK3C,C,oFC3CT,UApCajC,IAGN,IAFLmC,MAAQC,qBAAsBC,GAC9BC,aAAa,KAAEtB,IAChBhB,EAGC,OAFAuC,QAAQC,IAAI,YAAaxB,EAAMqB,GAG7B5B,EAAAA,cAACgC,EAAAA,EAAM,KACLhC,EAAAA,cAAA,YACEA,EAAAA,cAACiC,EAAAA,EAAG,CAACC,MAAO3B,IACZP,EAAAA,cAAA,UACGO,EACDP,EAAAA,cAACmC,EAAAA,EAAY,CAACP,SAAUA,KAG1B5B,EAAAA,cAAA,MAAIM,UAAU,iBACXsB,EAASQ,MAAMtC,KAAIuC,IAAwB,IAArBC,KAAM7C,GAAS4C,EACpC,OAAOrC,EAAAA,cAACuC,EAAAA,EAAW,CAACnC,IAAKX,EAAQY,GAAIZ,QAASA,GAAW,MAIxD,C","sources":["webpack://gatsby-starter-default/./src/components/ConcertCard/concertCard.js","webpack://gatsby-starter-default/./src/templates/city.js"],"sourcesContent":["import PropTypes from \"prop-types\"\nimport React from \"react\"\nimport { Link } from \"gatsby\"\n\nimport \"./concertCard.scss\"\n\nconst ConcertCard = ({ concert }) => {\n  const heading = () => {\n    if (concert.isFestival) {\n      return concert.festival.name\n    }\n    return (\n      <Link to={`/band/${concert.bands[0].slug}`}>{concert.bands[0].name}</Link>\n    )\n  }\n\n  const bands = () => {\n    const bands = [...concert.bands]\n    // TODO: Badges as seperate (tag) component?\n    if (concert.isFestival) {\n      return bands.map((band) => {\n        return (\n          <Link\n            to={`/band/${band.slug}`}\n            key={band.id}\n            className=\"badge bg-primary mr-2\"\n          >\n            {band.name}\n          </Link>\n        )\n      })\n    } else {\n      bands.shift()\n      return bands.map((band) => {\n        return (\n          <Link\n            to={`/band/${band.slug}`}\n            key={band.id}\n            className=\"badge bg-primary mr-2\"\n          >\n            {band.name}\n          </Link>\n        )\n      })\n    }\n  }\n\n  const isInTheFuture = () => {\n    if (concert.date > new Date().toISOString()) {\n      return \"future\"\n    }\n    return \"\"\n  }\n\n  const getDate = () => {\n    const date = new Date(concert.date)\n    return date.toLocaleDateString(\"de-DE\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    })\n  }\n\n  return (\n    <li className={`concert-card card ${isInTheFuture()}`}>\n      <div\n        className=\"concert-card-image\"\n        style={{\n          backgroundImage: `url(${concert.bands[0].image?.file.url})`,\n        }}\n      ></div>\n      <div className=\"concert-card-body\">\n        <h3 className=\"card-title\">{heading()}</h3>\n        <span>{getDate()}</span>\n        {bands() && <div className=\"bands\">{bands()}</div>}\n      </div>\n      <div className=\"concert-card-location\">\n        <div>\n          <div className=\"club\">{concert.club}</div>\n          <div className=\"city\">\n            <Link\n              to={`/city/${concert.fields.geocoderAddressFields._normalized_city.toLowerCase()}`}\n            >\n              {concert.fields.geocoderAddressFields._normalized_city}\n            </Link>\n          </div>\n        </div>\n      </div>\n    </li>\n  )\n}\n\nConcertCard.propTypes = {\n  concert: PropTypes.object,\n}\n\nexport default ConcertCard\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { graphql } from \"gatsby\"\n\nimport Layout from \"../components/layout\"\nimport ConcertCard from \"../components/ConcertCard/concertCard\"\nimport ConcertCount from \"../components/ConcertCount/concertCount\"\nimport Seo from \"../components/seo\"\n\nconst City = ({\n  data: { allContentfulConcert: concerts },\n  pageContext: { name },\n}) => {\n  console.log(\"city name\", name, concerts)\n\n  return (\n    <Layout>\n      <main>\n        <Seo title={name} />\n        <h2>\n          {name}\n          <ConcertCount concerts={concerts} />\n        </h2>\n\n        <ul className=\"list-unstyled\">\n          {concerts.edges.map(({ node: concert }) => {\n            return <ConcertCard key={concert.id} concert={concert} />\n          })}\n        </ul>\n      </main>\n    </Layout>\n  )\n}\n\nCity.propTypes = {\n  data: PropTypes.shape({\n    allContentfulBand: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n    }),\n  }).isRequired,\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default City\n\nexport const pageQuery = graphql`\n  query CityQuery($name: String!) {\n    allContentfulConcert(\n      sort: { date: DESC }\n      filter: {\n        fields: { geocoderAddressFields: { _normalized_city: { eq: $name } } }\n      }\n    ) {\n      edges {\n        node {\n          ...ContentfulConcertFields\n        }\n      }\n      totalCount\n    }\n  }\n`\n"],"names":["_ref","_concert$bands$0$imag","concert","bands","_toConsumableArray","isFestival","shift","map","band","React","Link","to","slug","key","id","className","name","date","Date","toISOString","style","backgroundImage","image","file","url","festival","toLocaleDateString","year","month","day","club","fields","geocoderAddressFields","_normalized_city","toLowerCase","data","allContentfulConcert","concerts","pageContext","console","log","Layout","Seo","title","ConcertCount","edges","_ref2","node","ConcertCard"],"sourceRoot":""}