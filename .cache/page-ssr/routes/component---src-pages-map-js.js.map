{"version":3,"file":"component---src-pages-map-js.js","mappings":"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","sources":["webpack://gatsby-starter-default/./node_modules/leaflet.markercluster/dist/MarkerCluster.Default.css","webpack://gatsby-starter-default/./node_modules/leaflet.markercluster/dist/MarkerCluster.css","webpack://gatsby-starter-default/./node_modules/leaflet.markercluster/dist/leaflet.markercluster-src.js","webpack://gatsby-starter-default/./node_modules/leaflet/dist/leaflet-src.js","webpack://gatsby-starter-default/./node_modules/leaflet/dist/leaflet.css","webpack://gatsby-starter-default/./node_modules/leaflet/src/images/marker.svg","webpack://gatsby-starter-default/./src/components/ConcertCount/concertCount.js","webpack://gatsby-starter-default/./src/components/Header/header.js","webpack://gatsby-starter-default/./src/components/layout.js","webpack://gatsby-starter-default/./src/components/seo.js","webpack://gatsby-starter-default/./src/pages/map.js"],"sourcesContent":["","","","","","export default \"data:image/svg+xml;base64,\"","import PropTypes from \"prop-types\"\nimport React from \"react\"\n\nconst ConcertCount = ({ concerts }) => {\n  const now = new Date()\n\n  const concertsInPast = () =>\n    concerts.edges.filter(({ node }) => new Date(node.date) < now)\n\n  const concertsInFuture = () =>\n    concerts.edges.filter(({ node }) => new Date(node.date) > now)\n\n  return (\n    <span\n      className=\"badge rounded-pill\"\n      title={`${concertsInFuture().length} concerts planned`}\n    >\n      <span\n        className=\"past badge bg-primary rounded-pill\"\n        title={`${concertsInPast().length} concerts visited`}\n      >\n        {concertsInPast().length}\n      </span>\n      {concertsInFuture().length}\n    </span>\n  )\n}\n\nConcertCount.propTypes = {\n  concert: PropTypes.object,\n}\n\nexport default ConcertCount\n","import { Link } from \"gatsby\"\nimport PropTypes from \"prop-types\"\nimport React from \"react\"\n\nimport ConcertCount from \"../ConcertCount/concertCount\"\n\nimport \"./header.scss\"\n\nconst Header = ({ siteTitle = \"\", concerts }) => (\n  <header className=\"bg-light shadow-sm\">\n    <div className=\"container\">\n      <h1>\n        <Link to=\"/\">{siteTitle}</Link>\n      </h1>\n      <wbr />\n      <ConcertCount concerts={concerts} />\n\n      <nav>\n        <a href=\"/\">Home</a>\n        <a href=\"/map\">Map</a>\n      </nav>\n    </div>\n  </header>\n)\n\nHeader.propTypes = {\n  siteTitle: PropTypes.string,\n}\n\nexport default Header\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { useStaticQuery, graphql } from \"gatsby\"\n\nimport Header from \"./Header/header\"\n\nimport \"../styles/layout.scss\"\n\nconst Layout = ({ children }) => {\n  const data = useStaticQuery(graphql`\n    query SiteTitleQuery {\n      site {\n        siteMetadata {\n          title\n        }\n      }\n      allContentfulConcert(sort: { date: DESC }) {\n        edges {\n          node {\n            ...ContentfulConcertFields\n          }\n        }\n        totalCount\n      }\n    }\n  `)\n  return (\n    <>\n      <Header\n        siteTitle={data.site.siteMetadata.title}\n        concerts={data.allContentfulConcert}\n      />\n\n      {children}\n\n      <footer>¬© {new Date().getFullYear()} ¬∑ Built with ‚ù§Ô∏è on üåç! ü§üüè≥Ô∏è‚Äçüåà</footer>\n    </>\n  )\n}\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n","/**\n * SEO component that queries for data with\n *  Gatsby's useStaticQuery React hook\n *\n * See: https://www.gatsbyjs.org/docs/use-static-query/\n */\n\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Helmet from \"react-helmet\"\nimport { useStaticQuery, graphql } from \"gatsby\"\n\nconst Seo = ({ description = \"\", lang = \"en\", meta = [], title }) => {\n  const { site } = useStaticQuery(graphql`\n    query {\n      site {\n        siteMetadata {\n          title\n          description\n          author\n        }\n      }\n    }\n  `)\n\n  const metaDescription = description || site.siteMetadata.description\n\n  return (\n    <Helmet\n      htmlAttributes={{\n        lang,\n      }}\n      title={title}\n      titleTemplate={`%s | ${site.siteMetadata.title}`}\n      meta={[\n        {\n          name: `description`,\n          content: metaDescription,\n        },\n        {\n          property: `og:title`,\n          content: title,\n        },\n        {\n          property: `og:description`,\n          content: metaDescription,\n        },\n        {\n          property: `og:type`,\n          content: `website`,\n        },\n        {\n          name: `twitter:card`,\n          content: `summary`,\n        },\n        {\n          name: `twitter:creator`,\n          content: site.siteMetadata.author,\n        },\n        {\n          name: `twitter:title`,\n          content: title,\n        },\n        {\n          name: `twitter:description`,\n          content: metaDescription,\n        },\n      ].concat(meta)}\n    />\n  )\n}\n\nSeo.propTypes = {\n  description: PropTypes.string,\n  lang: PropTypes.string,\n  meta: PropTypes.arrayOf(PropTypes.object),\n  title: PropTypes.string.isRequired,\n}\n\nexport default Seo\n","import React, { useEffect, useRef } from \"react\"\nimport PropTypes from \"prop-types\"\nimport { graphql } from \"gatsby\"\nimport \"leaflet/dist/leaflet.css\"\nimport Leaflet from \"leaflet\"\nimport markerSvg from \"leaflet/src/images/marker.svg\"\nimport \"leaflet.markercluster\"\nimport \"leaflet.markercluster/dist/MarkerCluster.css\"\nimport \"leaflet.markercluster/dist/MarkerCluster.Default.css\"\n\nimport Layout from \"../components/layout\"\nimport Seo from \"../components/seo\"\n\nconst MapPage = ({ data }) => {\n  const siteTitle = data.site.siteMetadata.title\n  const concerts = data.allContentfulConcert\n  const map = useRef(null)\n  const mapElement = useRef(null)\n\n  const getYear = (dateInput) => {\n    const date = new Date(dateInput)\n    return date.toLocaleDateString(\"de-DE\", {\n      year: \"numeric\",\n    })\n  }\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") {\n      return\n    }\n\n    const CustomIcon = Leaflet.Icon.extend({\n      options: {\n        iconSize: [40, 40],\n        shadowSize: [50, 64],\n        shadowAnchor: [4, 62],\n        iconAnchor: [20, 40],\n        popupAnchor: [0, -20],\n      },\n    })\n    var markerIcon = new CustomIcon({ iconUrl: markerSvg })\n    // eslint-disable-next-line no-magic-numbers\n    map.current = Leaflet.map(mapElement.current).setView(\n      [51.163375, 10.447683],\n      6\n    )\n\n    const getDate = (dateInput) => {\n      const date = new Date(dateInput)\n      return date.toLocaleDateString(\"de-DE\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n      })\n    }\n\n    const getName = (node) => {\n      if (node.isFestival) {\n        return `${node.festival.name} ${getYear(node.date)}`\n      }\n      return node.bands[0].name\n    }\n\n    Leaflet.tileLayer(\n      \"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\",\n      {\n        attribution:\n          'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery ¬© <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n        maxZoom: 18,\n        id: \"mapbox/outdoors-v11\",\n        tileSize: 512,\n        zoomOffset: -1,\n        accessToken:\n          \"pk.eyJ1IjoianV1cm8iLCJhIjoiY2tkaGdoNzk0MDJ1YTJzb2V4anZ3NXk4bSJ9.1m7LQQaTf2W4R-IgKKGZCQ\",\n      }\n    ).addTo(map.current)\n\n    const markers = Leaflet.markerClusterGroup()\n    concerts.edges.forEach(({ node }) => {\n      const marker = Leaflet.marker([node.city.lat, node.city.lon], {\n        icon: markerIcon,\n      }).addTo(map.current)\n      marker.bindPopup(\n        `<strong>${getName(node)}</strong><br />${node.club} am ${getDate(\n          node.date\n        )}`\n      )\n      markers.addLayer(marker)\n    })\n\n    map.current.addLayer(markers)\n  })\n\n  const mapOrNoMap = () => {\n    if (typeof window !== \"undefined\") {\n      return <div className=\"mapid\" ref={mapElement}></div>\n    }\n    return \"NOTHING\"\n  }\n\n  return (\n    <Layout>\n      <Seo title={siteTitle} />\n      {mapOrNoMap()}\n    </Layout>\n  )\n}\n\nMapPage.propTypes = {\n  data: PropTypes.shape({\n    allContentfulConcert: PropTypes.object.isRequired,\n  }).isRequired,\n}\n\nexport default MapPage\n\nexport const pageQuery = graphql`\n  query ConcertsMapQuery {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allContentfulConcert(sort: { date: DESC }) {\n      edges {\n        node {\n          ...ContentfulConcertFields\n        }\n      }\n      totalCount\n    }\n  }\n`\n"],"names":["PropTypes","React","ConcertCount","concerts","now","Date","concertsInPast","edges","filter","node","date","concertsInFuture","createElement","className","title","length","propTypes","concert","object","Link","Header","siteTitle","to","href","string","Layout","children","data","staticQueryData","Fragment","site","siteMetadata","allContentfulConcert","getFullYear","isRequired","Helmet","Seo","description","lang","meta","metaDescription","htmlAttributes","titleTemplate","name","content","property","author","concat","arrayOf","useEffect","useRef","Leaflet","markerSvg","MapPage","map","mapElement","getYear","dateInput","toLocaleDateString","year","window","CustomIcon","Icon","extend","options","iconSize","shadowSize","shadowAnchor","iconAnchor","popupAnchor","markerIcon","iconUrl","current","setView","getDate","month","day","getName","isFestival","festival","bands","tileLayer","attribution","maxZoom","id","tileSize","zoomOffset","accessToken","addTo","markers","markerClusterGroup","forEach","marker","city","lat","lon","icon","bindPopup","club","addLayer","mapOrNoMap","ref","shape","pageQuery"],"sourceRoot":""}